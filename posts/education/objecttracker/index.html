<!doctype html><html lang=en><head><title>Object Tracker</title>
<meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.d1fae4e3fe9c32276b69d8538feee4531abf3ca4cba1d6cc8410789cfd8e8079.css integrity="sha256-0frk4/6cMidradhTj+7kUxq/PKTLodbMhBB4nP2OgHk="><meta property="og:title" content="Object Tracker"><meta property="og:description" content="Object Tracker for Long-Term Visual Object Tracking Benchmark"><meta property="og:type" content="article"><meta property="og:url" content="https://www.bernatbc.me/posts/education/objecttracker/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-23T06:00:23+06:00"><meta property="article:modified_time" content="2023-06-23T06:00:23+06:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Object Tracker"><meta name=twitter:description content="Object Tracker for Long-Term Visual Object Tracking Benchmark"><meta name=description content="Object Tracker for Long-Term Visual Object Tracking Benchmark"><script>theme=localStorage.getItem("darkmode:color-scheme")||"system",theme=="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-posts kind-page" data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/>BernatBC</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-toggle=collapse data-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/#home>Home</a></li><li class=nav-item><a class=nav-link href=/#about>About</a></li><li class=nav-item><a class=nav-link href=/#skills>Skills</a></li><li class=nav-item><a class=nav-link href=/#education>Education</a></li><li class=nav-item><a class=nav-link href=/#featured-posts>Working on</a></li><li class=nav-item><a class=nav-link href=/#projects>Open Source Projects</a></li><li class=nav-item><a class=nav-link href=/#recent-posts>Recent Posts</a></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link href=/posts/>Posts</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=theme-icon src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=theme-icon src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts/ data-filter=all>Posts</a></li><div class=subtree><li><i data-feather=plus-circle></i><a class=list-link href=/posts/competitions/> Competitions</a><ul><li><a class=list-link href=/posts/competitions/codejam2021/ title="Google Code Jam 2021">Google Code Jam 2021</a></li><li><a class=list-link href=/posts/competitions/hashcode2021/ title="Google Hash Code 2021">Google Hash Code 2021</a></li><li><a class=list-link href=/posts/competitions/hashcode2022/ title="Google Hash Code 2022">Google Hash Code 2022</a></li><li><a class=list-link href=/posts/competitions/hackupc2021/ title="HackUPC 2021">HackUPC 2021</a></li><li><a class=list-link href=/posts/competitions/junction2023/ title="Junction 2023">Junction 2023</a></li><li><a class=list-link href=/posts/competitions/ncpc2023/ title="NCPC 2023">NCPC 2023</a></li><li><a class=list-link href=/posts/competitions/royalhackawayv6/ title="Royal Hackaway v6">Royal Hackaway v6</a></li><li><a class=list-link href=/posts/competitions/20concursupc/ title="Vintè Concurs de Programació de la UPC - Semifinal-2022">Vintè Concurs de Programació de la UPC - Semifinal-2022</a></li></ul></li><li><i data-feather=minus-circle></i><a class="active list-link" href=/posts/education/> Education</a><ul class=active><li><a class=list-link href=/posts/education/documentmanager/ title="Document Manager">Document Manager</a></li><li><a class=list-link href=/posts/education/knowledgebasedsystems/ title="Knowledge Based Systems">Knowledge Based Systems</a></li><li><a class=list-link href=/posts/education/localsearch/ title="Local Search">Local Search</a></li><li><a class="active list-link" href=/posts/education/objecttracker/ title="Object Tracker">Object Tracker</a></li><li><a class=list-link href=/posts/education/planification/ title=Planification>Planification</a></li><li><a class=list-link href=/posts/education/lambdacalculustelegrambot/ title="λ-Calculus Telegram Bot">λ-Calculus Telegram Bot</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/videogames/> Videogames</a><ul><li><a class=list-link href=/posts/videogames/europoly/ title=Europoly>Europoly</a></li><li><a class=list-link href=/posts/videogames/minesweeper/ title=Minesweeper>Minesweeper</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/posts/education/objecttracker/hero.png)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/avatar3_hu878c8f9677e3f6c555a08d7bdf60d714_18180_120x120_fit_box_3.png alt="Author Image"><h5 class=author-name>Bernat Borràs Civil</h5><p class=text-muted>Friday, June 23, 2023</p></div><div class=title><h1>Object Tracker</h1></div><div class=tags><ul style=padding-left:0><li class=rounded><a href=/tags/artificial-intelligence/ class="btn, btn-sm">Artificial-Intelligence</a></li><li class=rounded><a href=/tags/computer-vision/ class="btn, btn-sm">Computer Vision</a></li><li class=rounded><a href=/tags/matlab/ class="btn, btn-sm">Matlab</a></li><li class=rounded><a href=/tags/python/ class="btn, btn-sm">Python</a></li><li class=rounded><a href=/tags/education/ class="btn, btn-sm">Education</a></li></ul></div><div class=post-content id=post-content><h2 id=the-statement>The statement</h2><p><a href=https://amoudgl.github.io/tlp/ target=_blank rel=noopener>Long-Term Visual Object Tracking Benchmark</a> is a dataset to benchmark object tracking algorithms. We were asked to implement four different algorithms. Two using tracking techniques, and two using recognition. For each technique, we had to implement one from scratch (an algorithm made for us) and another one extracted from the internet.</p><p>Given a series of frames and a bounding box corresponding to the object to track, the algorithm should follow the object. To evaluate the precision, we used the overlapping ratio between the computed bounding box and the optimal bounding box (which was given via a txt file).</p><p>The full statement is in the document below. Note that the statement is in Catalan.</p><embed src=ShortProjectQP2023.pdf width=100% height=700 type=application/pdf><h2 id=algorithms-and-methods>Algorithms and methods</h2><p>The four algorithms are the following:</p><h3 id=tracking-by-histogram-comparison>Tracking by histogram comparison</h3><p>The idea of this method is to find the most similar crop of the whole frame. To achieve it, we decided to compute the distance between the color histograms of both crops. Normalized color histograms are a 2D matrix where each cell represents an interval of color proportion from each component of RGB. One axis belongs to the red component, and the other one belongs to the green component. The blue component can be found by B = 1 - R - G.</p><p>We decided to use the
<a href=https://en.wikipedia.org/wiki/Chi-squared_test target=_blank rel=noopener>Chi-squared</a> distance between two histograms, as it is quite efficient and returns a pretty good value.</p><p>Obviously, this method is not efficient as it needs to compute 1280×720 possible crops. We had to reduce the number of comparisons, sacrificing precision. The first optimization was to only look for crops near the position of the object from the last frame. We decided to only check for crops that overlapped the previous bounding box. We accomplished drastically reducing the number of comparisons, but it wasn&rsquo;t enough. The second optimization was about doing comparisons every certain number of pixels. For example, if we checked every 5 pixels, we would reduce the number of comparisons by 25 times. We found that we could afford to check more frequently on smaller bounding boxes, so the value of the interval is computed depending on the size.</p><p>As you can read in the report, this was the best tracking method, as it consistently tracked the object, even though sometimes the precision is not there. Also, it&rsquo;s the second-best method after <code>Recognition using Yolov8 trained by ourselves</code>.</p><h3 id=tracking-by-sift-and-ransac>Tracking by SIFT and RANSAC</h3><p>The idea of this method is to find keypoints and their descriptors using the
<a href=https://en.wikipedia.org/wiki/Harris_corner_detector target=_blank rel=noopener>Harris corner detector</a> and the
<a href=https://en.wikipedia.org/wiki/Scale-invariant_feature_transform target=_blank rel=noopener>Scale-invariant feature transform (SIFT)</a> from both the crop of the object and the whole frame. After the keypoints and their descriptors are extracted, points are matched by distance, and we obtain the best matching using the
<a href=https://en.wikipedia.org/wiki/Random_sample_consensus target=_blank rel=noopener>Random sample consensus (RANSAC)</a>.</p><p>The results of this method weren&rsquo;t what we expected. This was the one that performed the worst, and by quite a bit. We detected two major faults. The first one is that if the object is not detailed, we couldn&rsquo;t find many keypoints, leading to a low number of matchings. RANSAC needs at least 3 pairs in order to compute the best matching. In some cases, even 3 pairs weren&rsquo;t enough, so
<a href=https://en.wikipedia.org/wiki/Random_sample_consensus target=_blank rel=noopener>RANSAC</a> could not return a matching. The other fault was if the background was detailed and weighted. The algorithm detected many points in the background, and the matching produced was always made in the starting position (the algorithm was matching the background but not the object).</p><h3 id=recognition-using-yolov8httpsdocsultralyticscom>Recognition using
<a href=https://docs.ultralytics.com/ target=_blank rel=noopener>Yolov8</a></h3><p>We found a neural network named
<a href=https://docs.ultralytics.com/ target=_blank rel=noopener>Yolov8</a>, that could detect several objects in an image. This network includes 80 different types of objects that can be distinguished. We just used it, but then we had the issue that we had to filter the results obtained. We manually selected the type of object to detect, and in some cases, more than one instance was recognized. Likewise, we made the decision to select the object that had the greatest confidence level.</p><p>The results of this method were pretty good, but a little lower than <code>Tracking by histogram comparison</code> and <code>Recognition using Yolov8 trained by ourselves</code>. The main issue was that there were a couple objects that the network didn&rsquo;t support, like <code>fish</code> and <code>faces</code>. Another issue found was not from the neural network; it was from our &lsquo;selection method&rsquo; when we detected multiple instances. An example could be found in the video <code>Boxing2</code>. We had to detect a certain boxer, and even though the network recognized it, it also recognized the opponent, and with a greater confidence level.</p><h3 id=recognition-using-yolov8httpsdocsultralyticscom-trained-by-ourselves>Recognition using
<a href=https://docs.ultralytics.com/ target=_blank rel=noopener>Yolov8</a> trained by ourselves</h3><p>In this method, we decided to train
<a href=https://docs.ultralytics.com/ target=_blank rel=noopener>Yolov8</a> with our own dataset. The professor allowed us to &ldquo;cheat&rdquo;, and add crops of the videos in order to train the network. We added 5 crops from each object to detect to our neural network, and after some failures, we got a pretty good recognition network for our videos.</p><p>Obviously, the results were the best ones, but we have to consider that when using it in other samples, the results will not be the ones we got. This network is specifically trained to recognize objects from this dataset only.</p><h2 id=getting-started>Getting Started</h2><h3 id=tracking-by-histogram-comparison-1>Tracking by histogram comparison</h3><h4 id=1-install-dependencies>1. Install dependencies</h4><p>The following dependencies are required:</p><ul><li>Matlab (latest version not necessary but recommended)</li></ul><h4 id=2-get-the-source-code>2. Get the source code</h4><p>To get the source code, you can simply download the zip file, or you can clone this repository by typing:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/BernatBC/ObjectTracker.git
</span></span></code></pre></div><h4 id=3-launch-matlab-and-run-code>3. Launch Matlab and run code</h4><p>You&rsquo;ll need to execute Matlab. Then you just open <code>tracking_nostre.mlx</code>, and press the Button Run.</p><p>Make sure you have <code>TinyTLP</code> folder in the same directory as the <code>tracking_nostre.mlx</code>.</p><h3 id=tracking-by-sift-and-ransac-1>Tracking by SIFT and RANSAC</h3><p>You need to follow the same steps as <code>Tracking by histogram comparison</code>, but with the source code file <code>tracking_internet.mlx</code>.</p><h3 id=recognition-using-yolov8httpsdocsultralyticscom-1>Recognition using
<a href=https://docs.ultralytics.com/ target=_blank rel=noopener>Yolov8</a></h3><h4 id=1-install-dependencies-1>1. Install dependencies</h4><p>The following dependencies are required:</p><ul><li>python3</li><li>pip</li></ul><p>After the installation of those packages, we&rsquo;ll install the following python packages:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install ultralytics
</span></span></code></pre></div><h4 id=2-get-the-source-code-1>2. Get the source code</h4><p>To get the source code, you can simply download the zip file, or you can clone this repository by typing:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/BernatBC/ObjectTracker.git
</span></span></code></pre></div><h4 id=3-run-python-script>3. Run python script</h4><p>From the repository directory, run the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python3 reconeixament_internet.py
</span></span></code></pre></div><p>Make sure you have <code>TinyTLP</code> folder in the same directory as the <code>reconeixament_internet.py</code>.</p><h3 id=recognition-using-yolov8httpsdocsultralyticscom-trained-by-ourselves-1>Recognition using
<a href=https://docs.ultralytics.com/ target=_blank rel=noopener>Yolov8</a> trained by ourselves</h3><p>You need to follow the steps 1 and 2 from <code>Recognition using Yolov8</code>.</p><h4 id=3-run-python-script-1>3. Run python script</h4><p>From the repository directory, run the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python3 reconeixament_nostre.py
</span></span></code></pre></div><p>Make sure you have <code>TinyTLP</code> folder in the same directory as the <code>reconeixament_nostre.py</code>.</p><h3 id=view-code-and-report-on-i-classfab-fa-githubigithubhttpsgithubcombernatbcobjecttracker><a href=https://github.com/bernatbc/objecttracker target=_blank rel=noopener>View Code and report on <i class="fab fa-github"></i>Github</a></h3></div><div class="row pl-3 pr-3"><div class="col-md-6 share-buttons"></div></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/education/localsearch/ title="Local Search" class="btn filled-button"><div><i class="fas fa-chevron-circle-left"></i> Prev</div><div class=next-prev-text>Local Search</div></a></div><div class="col-md-6 next-article"><a href=/posts/education/planification/ title="Planification project" class="btn filled-button"><div>Next <i class="fas fa-chevron-circle-right"></i></div><div class=next-prev-text>Planification project</div></a></div></div><hr></div></div></div><a id=scroll-to-top class=btn data-toggle=tooltip data-placement=left title="Scroll to top"><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#the-statement>The statement</a></li><li><a href=#algorithms-and-methods>Algorithms and methods</a><ul><li><a href=#tracking-by-histogram-comparison>Tracking by histogram comparison</a></li><li><a href=#tracking-by-sift-and-ransac>Tracking by SIFT and RANSAC</a></li><li><a href=#recognition-using-yolov8httpsdocsultralyticscom>Recognition using <a href=https://docs.ultralytics.com/>Yolov8</a></a></li><li><a href=#recognition-using-yolov8httpsdocsultralyticscom-trained-by-ourselves>Recognition using <a href=https://docs.ultralytics.com/>Yolov8</a> trained by ourselves</a></li></ul></li><li><a href=#getting-started>Getting Started</a><ul><li><a href=#tracking-by-histogram-comparison-1>Tracking by histogram comparison</a><ul><li><a href=#1-install-dependencies>1. Install dependencies</a></li><li><a href=#2-get-the-source-code>2. Get the source code</a></li><li><a href=#3-launch-matlab-and-run-code>3. Launch Matlab and run code</a></li></ul></li><li><a href=#tracking-by-sift-and-ransac-1>Tracking by SIFT and RANSAC</a></li><li><a href=#recognition-using-yolov8httpsdocsultralyticscom-1>Recognition using <a href=https://docs.ultralytics.com/>Yolov8</a></a><ul><li><a href=#1-install-dependencies-1>1. Install dependencies</a></li><li><a href=#2-get-the-source-code-1>2. Get the source code</a></li><li><a href=#3-run-python-script>3. Run python script</a></li></ul></li><li><a href=#recognition-using-yolov8httpsdocsultralyticscom-trained-by-ourselves-1>Recognition using <a href=https://docs.ultralytics.com/>Yolov8</a> trained by ourselves</a><ul><li><a href=#3-run-python-script-1>3. Run python script</a></li></ul></li><li><a href=#view-code-and-report-on-i-classfab-fa-githubigithubhttpsgithubcombernatbcobjecttracker><a href=https://github.com/bernatbc/objecttracker>View Code and report on <i class="fab fa-github"></i>Github</a></a></li></ul></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.me/#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.me/#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.me/#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.me/#featured-posts>Working on</a></li><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.me/#projects>Open Source Projects</a></li><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.me/#recent-posts>Recent Posts</a></li><li class=nav-item><a class=smooth-scroll href=/posts/>Posts</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:bernat.borrasc@gmail.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>bernat.borrasc@gmail.com</span></a></li><li><a href=https://github.com/BernatBC target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>BernatBC</span></a></li><li><a href=https://www.youtube.com/channel/UCWuKGhwo6zB_ptObwrumZXw target=_blank rel=noopener><span><i class="fab fa-fa-brands fa-youtube"></i></span> <span>BernatBC</span></a></li><li><a href=https://www.linkedin.com/in/bernat-borr%c3%a0s-i-civil target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>Bernat Borràs Civil</span></a></li><li><a href=https://devpost.com/bernat-borras-civil target=_blank rel=noopener><span><i class="fab fa-fa-brands fa-dev"></i></span> <span>Bernat Borràs Civil</span></a></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2023 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.649d49ef0db2b421047fcd3bd63c4884da376063c2206f412b07c2465c16f37b.js integrity="sha256-ZJ1J7w2ytCEEf8071jxIhNo3YGPCIG9BKwfCRlwW83s=" defer></script></body></html>