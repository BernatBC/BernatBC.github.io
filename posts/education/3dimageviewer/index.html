<!doctype html><html lang=en><head><title>3D Image Viewer</title>
<meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.53194cb4ded8e8abfaf0f35376d87b1931694c4a8f6e82b28a808e9eeea5795d.css integrity="sha256-UxlMtN7Y6Kv68PNTdth7GTFpTEqPboKyioCOnu6leV0="><meta property="og:url" content="https://www.bernatbc.tk/posts/education/3dimageviewer/"><meta property="og:site_name" content="BernatBC"><meta property="og:title" content="3D Image Viewer"><meta property="og:description" content="3D Image Viewer"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-07-01T06:00:23+06:00"><meta property="article:modified_time" content="2024-07-01T06:00:23+06:00"><meta property="article:tag" content="Education"><meta property="article:tag" content="JavaScript"><meta property="article:tag" content="OpenSeaDragon"><meta property="article:tag" content="ThreeJS"><meta name=twitter:card content="summary"><meta name=twitter:title content="3D Image Viewer"><meta name=twitter:description content="3D Image Viewer"><meta name=description content="3D Image Viewer"><script>theme=localStorage.getItem("theme-scheme")||localStorage.getItem("darkmode:color-scheme")||"light",theme=="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-posts kind-page" data-bs-spy=scroll data-bs-target=#TableOfContents data-bs-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/>BernatBC</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/#home>Home</a></li><li class=nav-item><a class=nav-link href=/#about>About</a></li><li class=nav-item><a class=nav-link href=/#skills>Skills</a></li><li class=nav-item><a class=nav-link href=/#experiences>Experiences</a></li><li class=nav-item><a class=nav-link href=/#education>Education</a></li><li class=nav-item><a class=nav-link href=/#featured-posts>Working on</a></li><li class=nav-item><a class=nav-link href=/#projects>Open Source Projects</a></li><li class=nav-item><a class=nav-link href=/#recent-posts>Recent Posts</a></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link href=/posts/>Posts</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=theme-icon src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=theme-icon src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts/ data-filter=all>Posts</a></li><div class=subtree><li><i data-feather=plus-circle></i><a class=list-link href=/posts/contests/> Contests</a><ul><li><a class=list-link href=/posts/contests/codejam2021/ title="Google Code Jam 2021">Google Code Jam 2021</a></li><li><a class=list-link href=/posts/contests/hashcode2021/ title="Google Hash Code 2021">Google Hash Code 2021</a></li><li><a class=list-link href=/posts/contests/hashcode2022/ title="Google Hash Code 2022">Google Hash Code 2022</a></li><li><a class=list-link href=/posts/contests/hackupc2021/ title="HackUPC 2021">HackUPC 2021</a></li><li><a class=list-link href=/posts/contests/junction2023/ title="Junction 2023">Junction 2023</a></li><li><a class=list-link href=/posts/contests/ncpc2023/ title="NCPC 2023">NCPC 2023</a></li><li><a class=list-link href=/posts/contests/royalhackawayv6/ title="Royal Hackaway v6">Royal Hackaway v6</a></li><li><a class=list-link href=/posts/contests/20concursupc/ title="Vintè Concurs de Programació de la UPC - Semifinal-2022">Vintè Concurs de Programació de la UPC - Semifinal-2022</a></li></ul></li><li><i data-feather=minus-circle></i><a class="active list-link" href=/posts/education/> Education</a><ul class=active><li><a class="active list-link" href=/posts/education/3dimageviewer/ title="3D Image Viewer">3D Image Viewer</a></li><li><a class=list-link href=/posts/education/documentmanager/ title="Document Manager">Document Manager</a></li><li><a class=list-link href=/posts/education/knowledgebasedsystems/ title="Knowledge Based Systems">Knowledge Based Systems</a></li><li><a class=list-link href=/posts/education/localsearch/ title="Local Search">Local Search</a></li><li><a class=list-link href=/posts/education/objecttracker/ title="Object Tracker">Object Tracker</a></li><li><a class=list-link href=/posts/education/planification/ title=Planification>Planification</a></li><li><a class=list-link href=/posts/education/vr-battlefield/ title="VR Battlefield">VR Battlefield</a></li><li><a class=list-link href=/posts/education/lambdacalculustelegrambot/ title="λ-Calculus Telegram Bot">λ-Calculus Telegram Bot</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/videogames/> Videogames</a><ul><li><a class=list-link href=/posts/videogames/europoly/ title=Europoly>Europoly</a></li><li><a class=list-link href=/posts/videogames/minesweeper/ title=Minesweeper>Minesweeper</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/posts/education/3dimageviewer/hero.png)></div><div class=page-content><div class="author-profile ms-auto align-self-lg-center"><img class=rounded-circle src=/images/avatar3_hu4911613447452303421.png alt="Author Image"><h5 class=author-name>Bernat Borràs Civil</h5><p class=text-muted>Monday, July 1, 2024</p></div><div class=title><h1>3D Image Viewer</h1></div><div class=tags><ul style=padding-left:0><li class=rounded><a href=/tags/education/ class="btn btn-sm btn-info">Education</a></li><li class=rounded><a href=/tags/javascript/ class="btn btn-sm btn-info">JavaScript</a></li><li class=rounded><a href=/tags/openseadragon/ class="btn btn-sm btn-info">OpenSeaDragon</a></li><li class=rounded><a href=/tags/threejs/ class="btn btn-sm btn-info">ThreeJS</a></li></ul></div><div class=post-content id=post-content><h2 id=introduction>Introduction</h2><p>This project was made for my bachelor thesis. You can take a look the full report
<a href=https://upcommons.upc.edu/handle/2117/411671 target=_blank rel=noopener>here</a> (note that&rsquo;s in catalan).</p><h2 id=abstract>Abstract</h2><p>Since the arrival of the photographic camera, humans have seen the need to find a way to organize photographs. Nowadays, the ease and simplicity of taking a photograph causes large quantities of them to accumulate. The most popular photo viewers and galleries display one image after another, in a list or grid, making it difficult to organize and searching them.</p><p>One area in which they are aware of this problem is the digitization of cultural heritage. In this area, historians and professional photographers take a large number of photographs at cultural sites and monuments around the world. This area brings added difficulty. In order to preserve the details of the site of interest, the photographs taken are of high quality, requiring an efficient system for less powerful devices.</p><p>This project aims to propose a solution to facilitate the work of searching and organizing images of a place of interest in an efficient manner, such as the church of Sant Quirze de Pedret. I will study the relationship that exists between two-dimensional images and the 3D space where they were captured. Also, the relationship between physical collection spaces and three-dimensional models will be studied.</p><p>With these studies carried out, it is intended to visualize these images taking into account the 3D environment, together with 3D models of the church. The high quality of the photographs makes the fluidity of the solution an important factor to take into account, requiring important optimizations to be applied to the developed product.</p><h2 id=gallery>Gallery</h2><figure><img src=/posts/education/3dimageviewer/hero.png></figure><p style=text-align:center>An overview of the 3D environment created with ThreeJS.</p><figure><img src=/posts/education/3dimageviewer/sphere2.png></figure><p style=text-align:center>An overview of the image viewer created with OpenSeaDragon.</p><h2 id=getting-started-south-apse-with-full-model>Getting Started (South Apse with full model)</h2><h3 id=1-create-directory-structure>1. Create directory structure</h3><p>You&rsquo;ll need to create a <code>public</code> directory in the root of the project. This folder will contain the images, models and data files. The structure of this directory needs to be the following:</p><ul><li>public<ul><li>images<ul><li>low_res</li><li>Sant Quirze de Pedret by Zones</li></ul></li><li>models<ul><li>pedret</li></ul></li><li>out-files<ul><li>MNAC-AbsidiolaSud</li></ul></li></ul></li></ul><h3 id=2-add-full-resolution-pictures>2. Add full resolution pictures</h3><p>Now, add the pictures inside <code>public/images/Sant Quirze de Pedret by Zones</code>. Inside <code>MNAC - South Apse</code> you&rsquo;ll find a directory called <code>Pictoric details and architecture</code>. Please place those pictures into <code>public/images/Sant Quirze de Pedret by Zones/MNAC - South Apse</code>.</p><h3 id=3-create-low-resolution-pictures>3. Create low resolution pictures</h3><p>Copy your <code>public/images/Sant Quirze de Pedret by Zones</code> into <code>public/images/low_res/Sant Quirze de Pedret by Zones</code>. Then copy <code>reducesize.sh</code> inside <code>public/images/low_res/Sant Quirze de Pedret by Zones/MNAC - South Apse</code> and run the script.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chmod +x reducesize.sh <span style=color:#75715e># Give execution permissions</span>
</span></span><span style=display:flex><span>./reducesize.sh <span style=color:#75715e># Run the script</span>
</span></span></code></pre></div><p><em>IMPORTANT:</em> This script will override the pictures, so make sure you are running the script against the files located into <em>low_res</em> directory.</p><h3 id=4-create-dzi-pictures>4. Create dzi pictures</h3><p>Now, install
<a href=https://github.com/openzoom/deepzoom.py target=_blank rel=noopener>deepzoom.py</a> following the repo guide. After the installation is completed, please, copy <code>image-to-dzi.py</code> and <code>makeDZI.sh</code> files inside <code>public/images/Sant Quirze de Pedret by Zones</code>. Now, run <code>makeDZI.sh</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chmod +x makeDZI.sh <span style=color:#75715e># Give execution permissions</span>
</span></span><span style=display:flex><span>./makeDZI.sh <span style=color:#75715e># Run the script</span>
</span></span></code></pre></div><h3 id=5-place-your-model>5. Place your model</h3><p>Now, add your model <code>pedret_XII_text4K.glb</code> into <code>public/models/pedret</code>. In the case you have a different one, you&rsquo;ll need to change the model name inside <code>main.js</code>.</p><h3 id=6-place-your-bundler-files>6. Place your Bundler files</h3><p>Now, place your <code>MNAC-AbsSud-CamerasRegistration.out</code> inside <code>public/out-files/MNAC-AbsidiolaSud</code>. Then modify the paths of your <code>MNAC-AbsSud-CamerasList.lst</code>. To do so execute <code>convert_picture_list.py</code>. Before running it, modify the paths inside <code>convert_picture_list.py</code> to fit your needs. Place the outputted file into <code>public/out-files/MNAC-AbsidiolaSud</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python3 convert_picture_list.py <span style=color:#75715e># Run the script</span>
</span></span></code></pre></div><h3 id=proper-structure>Proper structure</h3><p>Your <code>public</code> directory should be similar to:</p><ul><li>public<ul><li>images<ul><li>low_res<ul><li>Sant Quirze de Pedret by Zones<ul><li>MNAC - South Apse<ul><li>*.jpg (10% resolution)</li></ul></li></ul></li></ul></li><li>Sant Quirze de Pedret by Zones<ul><li>MNAC - South Apse<ul><li>*.jpg</li><li>*.dzi</li></ul></li></ul></li></ul></li><li>models<ul><li>pedret<ul><li>pedret_XII_text4K.glb</li></ul></li></ul></li><li>out-files<ul><li>MNAC-AbsidiolaSud<ul><li>MNAC-AbsSud-CamerasRegistration.out</li><li>MNAC-AbsSud-CamerasList-converted.lst</li></ul></li></ul></li></ul></li></ul><h3 id=7-install-dependencies>7. Install dependencies</h3><p>Install node dependencies. Run the following command in the root of the project.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install
</span></span></code></pre></div><h3 id=8-run-the-application>8. Run the application</h3><p>Finally you&rsquo;ll need to start your server, running:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npx vite
</span></span></code></pre></div><p>Once it&rsquo;s loaded, you can open your browser and navigate to <code>http://localhost:5173/</code>. Your URL might be different, so pay attention to the <code>npx vite</code> output.</p><h2 id=demo>Demo</h2><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/4iaSXIId2zU?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div><h3 id=view-code-on-i-classfab-fa-githubigithubhttpsgithubcombernatbcvisualitzador-de-fotografies-en-3dtreeweb3d-bernat><a href=https://github.com/BernatBC/visualitzador-de-fotografies-en-3D/tree/web3d-bernat target=_blank rel=noopener>View Code on <i class="fab fa-github"></i>Github</a></h3><h3 id=download-the-report-in-i-classfa-solid-fa-file-pdfipdfhttpsupcommonsupceduhandle2117411671><a href=https://upcommons.upc.edu/handle/2117/411671 target=_blank rel=noopener>Download the report in <i class="fa-solid fa-file-pdf"></i>PDF</a></h3></div><div class="row ps-3 pe-3"><div class="col-md-6 share-buttons"></div></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/contests/20concursupc/ title="Vintè Concurs de Programació de la UPC - Semifinal 2022" class="btn filled-button"><div><i class="fas fa-chevron-circle-left"></i> Prev</div><div class=next-prev-text>Vintè Concurs de Programació de la UPC - Semifinal 2022</div></a></div><div class="col-md-6 next-article"><a href=/posts/education/documentmanager/ title="Document manager" class="btn filled-button"><div>Next <i class="fas fa-chevron-circle-right"></i></div><div class=next-prev-text>Document manager</div></a></div></div><hr></div></div></div><a id=scroll-to-top class=btn type=button data-bs-toggle=tooltip data-bs-placement=left title="Scroll to top"><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center ps-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#abstract>Abstract</a></li><li><a href=#gallery>Gallery</a></li><li><a href=#getting-started-south-apse-with-full-model>Getting Started (South Apse with full model)</a><ul><li><a href=#1-create-directory-structure>1. Create directory structure</a></li><li><a href=#2-add-full-resolution-pictures>2. Add full resolution pictures</a></li><li><a href=#3-create-low-resolution-pictures>3. Create low resolution pictures</a></li><li><a href=#4-create-dzi-pictures>4. Create dzi pictures</a></li><li><a href=#5-place-your-model>5. Place your model</a></li><li><a href=#6-place-your-bundler-files>6. Place your Bundler files</a></li><li><a href=#proper-structure>Proper structure</a></li><li><a href=#7-install-dependencies>7. Install dependencies</a></li><li><a href=#8-run-the-application>8. Run the application</a></li></ul></li><li><a href=#demo>Demo</a><ul><li><a href=#view-code-on-i-classfab-fa-githubigithubhttpsgithubcombernatbcvisualitzador-de-fotografies-en-3dtreeweb3d-bernat><a href=https://github.com/BernatBC/visualitzador-de-fotografies-en-3D/tree/web3d-bernat>View Code on <i class="fab fa-github"></i>Github</a></a></li><li><a href=#download-the-report-in-i-classfa-solid-fa-file-pdfipdfhttpsupcommonsupceduhandle2117411671><a href=https://upcommons.upc.edu/handle/2117/411671>Download the report in <i class="fa-solid fa-file-pdf"></i>PDF</a></a></li></ul></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-start"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.tk/#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.tk/#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.tk/#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.tk/#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.tk/#featured-posts>Working on</a></li><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.tk/#projects>Open Source Projects</a></li><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.tk/#recent-posts>Recent Posts</a></li><li class=nav-item><a class=smooth-scroll href=/posts/>Posts</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:bernat.borrasc@gmail.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>bernat.borrasc@gmail.com</span></a></li><li><a href=https://github.com/BernatBC target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>BernatBC</span></a></li><li><a href=https://www.youtube.com/channel/UCWuKGhwo6zB_ptObwrumZXw target=_blank rel=noopener><span><i class="fa-brands fa-youtube"></i></span> <span>BernatBC</span></a></li><li><a href=https://www.linkedin.com/in/bernat-borr%c3%a0s-i-civil target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>Bernat Borràs Civil</span></a></li><li><a href=https://devpost.com/bernat-borras-civil target=_blank rel=noopener><span><i class="fa-solid fa-d"></i></span> <span>Bernat Borràs Civil</span></a></li></ul></div></div></div><hr><div class=container><div class="row text-start"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu16779671404603505019.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2024 Copyright.</div><div class="col-md-4 text-end"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.b291ea9b9fabfce5827a11c356164ddc35a13fa85ff11e79fe8d3ced8152744a.js integrity="sha256-spHqm5+r/OWCehHDVhZN3DWhP6hf8R55/o087YFSdEo=" defer></script></body></html>