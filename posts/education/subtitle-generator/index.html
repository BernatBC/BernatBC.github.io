<!doctype html><html lang=en><head><title>Subtitle Generator</title>
<meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.3729448d5da6f409cc7c97a46480e1c23a81ac916507411919505d2ca37d3ee8.css integrity="sha256-NylEjV2m9AnMfJekZIDhwjqBrJFlB0EZGVBdLKN9Pug="><meta property="og:url" content="https://www.bernatbc.tk/posts/education/subtitle-generator/"><meta property="og:site_name" content="BernatBC"><meta property="og:title" content="Subtitle Generator"><meta property="og:description" content="Subtitle Generator"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-20T06:00:23+06:00"><meta property="article:modified_time" content="2025-02-20T06:00:23+06:00"><meta property="article:tag" content="AI"><meta property="article:tag" content="Education"><meta property="article:tag" content="Mini-Hackathon"><meta property="article:tag" content="Python"><meta name=twitter:card content="summary"><meta name=twitter:title content="Subtitle Generator"><meta name=twitter:description content="Subtitle Generator"><meta name=description content="Subtitle Generator"><script integrity="sha256-DO4ugzEwhTW1Id1UIWn0gUJWaebCYOypeTit6LW4QB4=">let theme=localStorage.getItem("theme-scheme")||localStorage.getItem("darkmode:color-scheme")||"light";theme==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-posts kind-page" data-bs-spy=scroll data-bs-target=#TableOfContents data-bs-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button aria-label=sidebar>
<i data-feather=sidebar></i>
</button>
<a class="navbar-brand d-flex align-items-center" href=/><span>BernatBC</span>
</a><button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/#home>Home</a></li><li class=nav-item><a class=nav-link href=/#about>About</a></li><li class=nav-item><a class=nav-link href=/#skills>Skills</a></li><li class=nav-item><a class=nav-link href=/#experiences>Experiences</a></li><li class=nav-item><a class=nav-link href=/#education>Education</a></li><li class=nav-item><a class=nav-link href=/#projects>Open Source Projects</a></li><li class=nav-item><a class=nav-link href=/#recent-posts>Recent Posts</a></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link href=/posts/>Posts</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=theme-icon src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=theme-icon src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts/ data-filter=all>Posts</a></li><div class=subtree><li><i data-feather=plus-circle></i><a class=list-link style=padding-left:.25rem href=/posts/contests/> Contests</a><ul><li><a class=list-link style=padding-left:.5rem href=/posts/contests/codejam2021/ title="Google Code Jam 2021">Google Code Jam 2021</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/contests/hashcode2021/ title="Google Hash Code 2021">Google Hash Code 2021</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/contests/hashcode2022/ title="Google Hash Code 2022">Google Hash Code 2022</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/contests/hackupc2021/ title="HackUPC 2021">HackUPC 2021</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/contests/junction2023/ title="Junction 2023">Junction 2023</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/contests/ncpc2023/ title="NCPC 2023">NCPC 2023</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/contests/royalhackawayv6/ title="Royal Hackaway v6">Royal Hackaway v6</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/contests/20concursupc/ title="Vintè Concurs de Programació de la UPC - Semifinal-2022">Vintè Concurs de Programació de la UPC - Semifinal-2022</a></li></ul></li><li><i data-feather=minus-circle></i><a class="active list-link" style=padding-left:.25rem href=/posts/education/> Education</a><ul class=active><li><a class=list-link style=padding-left:.5rem href=/posts/education/3dimageviewer/ title="3D Image Viewer">3D Image Viewer</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/education/database-embedding/ title="Database Embedding">Database Embedding</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/education/documentmanager/ title="Document Manager">Document Manager</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/education/knowledgebasedsystems/ title="Knowledge Based Systems">Knowledge Based Systems</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/education/llm-chat-rag/ title="LLM Chat RAG">LLM Chat RAG</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/education/localsearch/ title="Local Search">Local Search</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/education/minichef-ar/ title="MiniChef AR">MiniChef AR</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/education/objecttracker/ title="Object Tracker">Object Tracker</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/education/planification/ title=Planification>Planification</a></li><li><a class="active list-link" style=padding-left:.5rem href=/posts/education/subtitle-generator/ title="Subtitle Generator">Subtitle Generator</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/education/vr-battlefield/ title="VR Battlefield">VR Battlefield</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/education/web-to-markdown/ title="Web to Markdown">Web to Markdown</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/education/lambdacalculustelegrambot/ title="λ-Calculus Telegram Bot">λ-Calculus Telegram Bot</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link style=padding-left:.25rem href=/posts/videogames/> Videogames</a><ul><li><a class=list-link style=padding-left:.5rem href=/posts/videogames/europoly/ title=Europoly>Europoly</a></li><li><a class=list-link style=padding-left:.5rem href=/posts/videogames/minesweeper/ title=Minesweeper>Minesweeper</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/posts/education/subtitle-generator/hero.png)></div><div class=page-content><div class="author-profile ms-auto align-self-lg-center"><img class=rounded-circle src=/images/profile_hu_ab7080eefaf7f4aa.jpg alt="Author Image"><h5 class=author-name>Bernat Borràs Civil</h5><p class=text-muted>Thursday, February 20, 2025</p></div><div class=title><h1>Subtitle Generator</h1></div><div class=tags-centered><div class=tags><ul style=padding-left:0><li><a href=/tags/ai/>AI</a></li><li><a href=/tags/education/>Education</a></li><li><a href=/tags/mini-hackathon/>Mini-hackathon</a></li><li><a href=/tags/python/>Python</a></li></ul></div></div><div class=post-content id=post-content><h1 id=subtitle-generator>Subtitle Generator</h1><video class=video-player id=video-44 playsinline controls>
<source src=subtitle_generator.mp4 type=video/mp4></video><p>This project provides a web application that automatically generates subtitles (in SRT or VTT format) from audio files. It leverages the power of OpenAI&rsquo;s Whisper speech recognition model for transcription and pyannote.audio for speaker diarization, all wrapped in a user-friendly FastAPI web interface.</p><h2 id=features>Features</h2><ul><li><strong>Web Interface:</strong> A clean, simple HTML interface for uploading audio files. No complex command-line usage is required.</li><li><strong>Multiple Audio Formats:</strong> Supports <code>.wav</code>, <code>.mp3</code>, <code>.m4a</code>, and <code>.flac</code> files. Automatic conversion to WAV is handled internally.</li><li><strong>Speaker Diarization:</strong> Identifies different speakers in the audio and includes speaker labels in the generated subtitles.</li><li><strong>Subtitle Formats:</strong> Generates subtitles in either <code>.srt</code> (SubRip) or <code>.vtt</code> (WebVTT) format, selectable via the web interface.</li><li><strong>Fast and Efficient:</strong> Utilizes a dynamically selected Whisper model (from <code>tiny</code> to <code>large</code>) based on your system&rsquo;s available RAM and VRAM (GPU memory), optimizing for performance and accuracy.</li><li><strong>Easy Deployment:</strong> Can be run directly with Uvicorn or easily deployed using Docker and Docker Compose.</li><li><strong>Well-Defined API:</strong> A single <code>/upload-audio/</code> endpoint handles file uploads and subtitle generation, with clear request and response formats.</li><li><strong>File Size Limit:</strong> The maximum upload file is limited to 50MB.</li></ul><h2 id=requirements>Requirements</h2><p>Before you get started, make sure you have the following:</p><ol><li><p><strong>Hugging Face Account and Token:</strong></p><ul><li>You <em>must</em> have a Hugging Face account. Create one at
<a href=https://huggingface.co/join target=_blank rel=noopener>Hugging Face</a>.</li><li>Generate an access token (with at least read access) from your
<a href=https://huggingface.co/settings/tokens target=_blank rel=noopener>Hugging Face settings</a>. You&rsquo;ll need this token for both direct execution and Docker deployment.</li><li><strong>Accept User Agreements:</strong> <em>Crucially</em>, you need to visit <em>both</em> of these pages and accept the user agreements:<ul><li><a href=https://huggingface.co/pyannote/speaker-diarization target=_blank rel=noopener>pyannote/speaker-diarization</a></li><li><a href=https://huggingface.co/pyannote/segmentation target=_blank rel=noopener>pyannote/segmentation</a></li></ul></li><li>Store your Hugging Face token into a <code>.env</code> file, or store it in the environment variable HF_AUTH_TOKEN.</li></ul></li><li><p><strong>Python:</strong> Python 3.7 or higher is recommended. Check your version:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python --version  <span style=color:#75715e># or python3 --version</span>
</span></span></code></pre></div></li><li><p><strong>FFmpeg:</strong> This is essential for audio processing. Install it using your system&rsquo;s package manager:</p><ul><li><p><strong>Ubuntu/Debian:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt install ffmpeg
</span></span></code></pre></div></li><li><p><strong>macOS (using Homebrew):</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew install ffmpeg
</span></span></code></pre></div></li><li><p><strong>Windows:</strong> Download a pre-built binary from a trusted source (e.g.,
<a href=https://www.gyan.dev/ffmpeg/builds/ target=_blank rel=noopener>gyan.dev</a>). Add the <code>bin</code> directory containing <code>ffmpeg.exe</code> and <code>ffprobe.exe</code> to your system&rsquo;s PATH environment variable. <em>Test this thoroughly</em> by opening a new command prompt and typing <code>ffmpeg -version</code>.</p></li><li><p><strong>Verification (all platforms):</strong> After installation, <em>always</em> verify:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ffmpeg -version
</span></span></code></pre></div></li></ul></li><li><p><strong>Python Packages:</strong> Install the required libraries via pip:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install -r requirements.txt
</span></span></code></pre></div><p>Ensure your <code>requirements.txt</code> file contains:</p><pre tabindex=0><code>uvicorn
fastapi
python-multipart
pydub
openai-whisper
pyannote.audio
dotenv
psutil
torch
</code></pre></li></ol><h2 id=setup-and-running-the-application>Setup and Running the Application</h2><h3 id=option-1-running-directly-without-docker-recommended-if-cuda>Option 1: Running Directly without Docker (Recommended if CUDA)</h3><ol><li><p><strong>Clone the Repository (Optional):</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone &lt;repository_url&gt;
</span></span><span style=display:flex><span>cd &lt;repository_directory&gt;
</span></span></code></pre></div><p>(Skip this if you have the files directly.)</p></li><li><p><strong>Create <code>index.html</code>:</strong> Make sure the <code>index.html</code> file is in the same directory as <code>main.py</code>.</p></li><li><p><strong>Create <code>.env</code> file:</strong> Create a file called <code>.env</code> in the main directory with this content:</p><pre tabindex=0><code>HF_AUTH_TOKEN=&lt;your_huggingface_token&gt;
</code></pre></li><li><p><strong>Run the Application with Uvicorn:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>uvicorn main:app --reload --host 0.0.0.0 --port <span style=color:#ae81ff>8080</span>
</span></span></code></pre></div><ul><li><code>main:app</code>: Adjust if your Python file or app instance have different names.</li><li><code>--reload</code>: Enables auto-reloading on code changes (great for development).</li><li><code>--host 0.0.0.0</code>: Allows access from other devices on your network. Remove for local-only access.</li><li><code>--port 8080</code>: Change if you need a different port.</li></ul></li><li><p><strong>Access the Application:</strong> Open your browser:</p><ul><li><strong>Locally:</strong> <code>http://localhost:8080</code></li><li><strong>From another device:</strong> <code>http://&lt;your_server_ip>:8080</code></li></ul></li></ol><h3 id=option-2-docker-compose-deployment-recommended-if-no-cuda>Option 2: Docker Compose Deployment (Recommended if no CUDA)</h3><p>Docker Compose simplifies deployment by managing the application and its dependencies in a container.</p><ol><li><p><strong>Install Docker and Docker Compose:</strong> Follow the official instructions for your operating system:
<a href=https://docs.docker.com/get-docker/ target=_blank rel=noopener>Docker Installation</a> and
<a href=https://docs.docker.com/compose/install/ target=_blank rel=noopener>Docker Compose Installation</a>.</p></li><li><p><strong>Create a <code>.env</code> file:</strong> Create a <code>.env</code> file in the <em>same directory</em> as your <code>compose.yaml</code> file. Add your Hugging Face token:</p><pre tabindex=0><code>HF_AUTH_TOKEN=&lt;your_huggingface_token&gt;
</code></pre><p><em>Important:</em> Do <em>not</em> commit your <code>.env</code> file to version control.</p></li><li><p><strong>Build and Run:</strong> From the directory containing <code>compose.yaml</code>, run:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker compose up --build
</span></span></code></pre></div><p>The <code>--build</code> flag forces a rebuild of the image, ensuring any changes to your code or <code>requirements.txt</code> are included. You can omit <code>--build</code> on subsequent runs if you haven&rsquo;t made changes. Use <code>docker compose up -d --build</code> to run in detached mode.</p></li><li><p><strong>Access the Application:</strong> Same as above (http://localhost:8080 or http://&lt;your_server_ip>:8080).</p></li><li><p><strong>Stop the application</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker compose down
</span></span></code></pre></div></li></ol><h3 id=option-3-docker-deployment-without-docker-compose>Option 3: Docker Deployment (Without Docker Compose)</h3><ol><li><p><strong>Build the Docker Image:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker build -t subtitle-generator .
</span></span></code></pre></div></li><li><p><strong>Run the Docker Container:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run -d -p 8080:8080 --name subtitle-generator -e HF_AUTH_TOKEN<span style=color:#f92672>=</span>&lt;your_huggingface_token&gt; subtitle-generator
</span></span></code></pre></div><p>Replace <code>&lt;your_huggingface_token></code> with your actual Hugging Face token.</p></li><li><p><strong>Access the Application:</strong> Open your web browser and go to:</p><ul><li><code>http://localhost:8080</code> (if you&rsquo;re accessing it from the same machine)</li><li><code>http://&lt;your_server_ip>:8080</code> (if accessing from another device on your network, replace <code>&lt;your_server_ip></code> with the server&rsquo;s IP address)</li></ul><p>You should see the &ldquo;Subtitle Generator&rdquo; web page.</p></li></ol><h2 id=api-documentation>API Documentation</h2><p>The API provides a single endpoint for uploading audio files and receiving generated subtitles.</p><ul><li><strong>Endpoint:</strong> <code>/upload-audio/</code></li><li><strong>Method:</strong> <code>POST</code></li><li><strong>Request:</strong><ul><li><code>Content-Type</code>: <code>multipart/form-data</code></li><li><strong>Form Fields:</strong><ul><li><code>audio_file</code>: (Required) The audio file to be transcribed.</li><li><code>file_type</code>: (Required) The desired subtitle format: <code>srt</code> or <code>vtt</code>.</li></ul></li></ul></li><li><strong>Response:</strong><ul><li><strong>Success (Status Code: 200 OK):</strong><ul><li><code>Content-Type</code>: <code>application/x-subrip</code> (for <code>.srt</code>) or <code>text/vtt</code> (for <code>.vtt</code>).</li><li>The response body contains the generated subtitle file content, ready for download. The response headers include <code>Content-Disposition: attachment; filename="&lt;original_filename>.&lt;srt|vtt>"</code>, prompting the browser to download the file.</li></ul></li><li><strong>Error (Status Codes: 400, 413, 500):</strong><ul><li><code>Content-Type</code>: <code>application/json</code></li><li>Body: A JSON object containing an error description:<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;detail&#34;</span>: <span style=color:#e6db74>&#34;Error message describing the problem.&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><strong>Possible Error Scenarios:</strong><ul><li><strong>Unsupported File Format (400):</strong> If the uploaded file is not one of the supported formats (<code>.wav</code>, <code>.mp3</code>, <code>.m4a</code>, <code>.flac</code>). Example:<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ <span style=color:#f92672>&#34;detail&#34;</span>: <span style=color:#e6db74>&#34;File format not supported. Please upload a file with one of the following extensions: .wav, .mp3, .m4a, .flac&#34;</span> }
</span></span></code></pre></div></li><li><strong>File Size Exceeded (413):</strong><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ <span style=color:#f92672>&#34;detail&#34;</span>: <span style=color:#e6db74>&#34;File size exceeds the maximum limit of 50 MB.&#34;</span> }
</span></span></code></pre></div></li><li><strong>Processing Error (500):</strong> Any other error during transcription or diarization. The error message will provide more details. Example:<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ <span style=color:#f92672>&#34;detail&#34;</span>: <span style=color:#e6db74>&#34;An unexpected error occurred during processing: &lt;specific error message&gt;&#34;</span> }
</span></span></code></pre></div></li><li><strong>Diarization/Token Error (500):</strong> If the Hugging Face token is invalid or missing, or if the user agreements haven&rsquo;t been accepted.<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ <span style=color:#f92672>&#34;detail&#34;</span>: <span style=color:#e6db74>&#34;Failed to load diarization pipeline: ... Ensure your token has the necessary permissions and you have accepted the user conditions at [https://hf.co/pyannote/speaker-diarization](https://hf.co/pyannote/speaker-diarization).&#34;</span>}
</span></span></code></pre></div></li></ul></li></ul></li></ul></li></ul><h2 id=model-selection-and-hardware-considerations>Model Selection and Hardware Considerations</h2><p>The application automatically selects the most appropriate Whisper model based on your system&rsquo;s available RAM and VRAM (GPU memory). Here&rsquo;s how it works:</p><ol><li><strong>RAM Check:</strong> The script checks the total available system RAM.</li><li><strong>Model Prioritization:</strong> It then tries to load the largest possible Whisper model that fits within the available RAM, in this order of priority (largest/most accurate to smallest/fastest):<ul><li><code>large</code> (~10GB RAM required)</li><li><code>turbo</code> (~6GB RAM required)</li><li><code>medium</code> (~5GB RAM required)</li><li><code>small</code> (~2GB RAM required)</li><li><code>base</code> (~1GB RAM required)</li><li><code>tiny</code> (~1GB RAM required)</li></ul></li><li><strong>GPU (CUDA) Utilization:</strong> If a CUDA-enabled GPU is detected <em>and</em> its VRAM is sufficient for the selected model, the model will be loaded onto the GPU for significantly faster processing. Otherwise, it will use the CPU.</li><li>Insufficient RAM message: If your system has insufficient RAM the program raises an error and stops.</li></ol><p>This dynamic selection ensures optimal performance without requiring manual configuration. You&rsquo;ll see a message in the console indicating which model was selected and whether it&rsquo;s using the CPU or GPU.</p><h2 id=contributing>Contributing</h2><p>Contributions are welcome! If you&rsquo;d like to contribute:</p><ol><li>Fork the repository.</li><li>Create a new branch for your feature or bug fix: <code>git checkout -b feature/my-new-feature</code> or <code>git checkout -b bugfix/fix-issue-123</code>.</li><li>Make your changes and commit them with clear, concise commit messages.</li><li>Push your branch to your forked repository.</li><li>Submit a pull request to the main repository.</li></ol><h2 id=limitations>Limitations</h2><ul><li><strong>Model Accuracy:</strong> The accuracy of the subtitles depends on the selected Whisper model. Larger models are generally more accurate but require more resources. Noisy audio or complex language can also impact accuracy.</li><li><strong>Speaker Diarization:</strong> While pyannote.audio provides speaker diarization, it&rsquo;s not perfect. Overlapping speech or similar-sounding voices can sometimes lead to errors in speaker identification.</li></ul><h2 id=further-improvements-todos>Further Improvements (TODOs)</h2><ul><li><strong>Implement Progress Bar:</strong> Display a progress bar during upload and processing to provide feedback to the user.</li><li><strong>Improve Subtitle Quality:</strong> Explore techniques for improving subtitle segmentation and formatting (e.g., sentence-level segmentation, handling overlapping speech).</li><li><strong>Allow users to specify the model:</strong> Add a form field in the HTML page to let the user select the desired Whisper model (tiny, base, small, medium, large), overriding the automatic selection.</li><li><strong>Add a reset button:</strong> Add a button to reset the form.</li><li><strong>Add WebVTT styling capabilities:</strong> Research the WebVTT format and add options to specify parameters like text color and position.</li></ul><h3 id=view-code-on><a href=https://github.com/DGSI-UPC/Subtitle-Generator target=_blank rel=noopener>View Code on <i class="fab fa-github"></i>Github</a></h3></div><div class="row ps-3 pe-3"><div class="col-md-6 share-buttons"></div></div><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/education/planification/ title="Mars Planification" class="btn nav-button prev-button"><i class="fas fa-chevron-circle-left"></i><div class=nav-text><div class=title>Mars Planification</div></div></a></div><div class="col-md-6 next-article"><a href=/posts/education/vr-battlefield/ title="VR Battlefield" class="btn nav-button next-button"><div class=nav-text><div class=title>VR Battlefield</div></div><i class="fas fa-chevron-circle-right"></i></a></div></div></div></div></div><a id=scroll-to-top class=btn type=button data-bs-toggle=tooltip data-bs-placement=left title="Scroll to top"><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center ps-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><nav id=TableOfContents><ul><li><a href=#features>Features</a></li><li><a href=#requirements>Requirements</a></li><li><a href=#setup-and-running-the-application>Setup and Running the Application</a><ul><li><a href=#option-1-running-directly-without-docker-recommended-if-cuda>Option 1: Running Directly without Docker (Recommended if CUDA)</a></li><li><a href=#option-2-docker-compose-deployment-recommended-if-no-cuda>Option 2: Docker Compose Deployment (Recommended if no CUDA)</a></li><li><a href=#option-3-docker-deployment-without-docker-compose>Option 3: Docker Deployment (Without Docker Compose)</a></li></ul></li><li><a href=#api-documentation>API Documentation</a></li><li><a href=#model-selection-and-hardware-considerations>Model Selection and Hardware Considerations</a></li><li><a href=#contributing>Contributing</a></li><li><a href=#limitations>Limitations</a></li><li><a href=#further-improvements-todos>Further Improvements (TODOs)</a><ul><li><a href=#view-code-on><a href=https://github.com/DGSI-UPC/Subtitle-Generator>View Code on <i class="fab fa-github"></i>Github</a></a></li></ul></li></ul></nav></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-start"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.tk/#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.tk/#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.tk/#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.tk/#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.tk/#projects>Open Source Projects</a></li><li class=nav-item><a class=smooth-scroll href=https://www.bernatbc.tk/#recent-posts>Recent Posts</a></li><li class=nav-item><a class=smooth-scroll href=/posts/>Posts</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:bernat.borrasc@gmail.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>bernat.borrasc@gmail.com</span></a></li><li><a href=https://github.com/BernatBC target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>BernatBC</span></a></li><li><a href=https://www.youtube.com/channel/UCWuKGhwo6zB_ptObwrumZXw target=_blank rel=noopener><span><i class="fa-brands fa-youtube"></i></span> <span>BernatBC</span></a></li><li><a href=https://www.linkedin.com/in/bernat-borr%c3%a0s-i-civil target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>Bernat Borràs Civil</span></a></li><li><a href=https://devpost.com/bernat-borras-civil target=_blank rel=noopener><span><i class="fa-solid fa-d"></i></span> <span>Bernat Borràs Civil</span></a></li></ul></div></div></div><hr><div class=container><div class="row text-start"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu_b3360284c55cf72d.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2024 Copyright.</div><div class="col-md-4 text-end"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.964427c9b1a5f7d21d641fd1ae4a4bc1892eccb8e95f6181457e561af7162756.js integrity="sha256-lkQnybGl99IdZB/RrkpLwYkuzLjpX2GBRX5WGvcWJ1Y=" defer></script></body></html>